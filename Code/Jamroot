import os ;
local BOOSTHOME = [ os.environ BOOSTHOME ] ;
local PYTHON_ROOT = [ os.environ PYTHON_ROOT ] ;
local PYTHON_VERSION = [ os.environ PYTHON_VERSION ] ;
local RDBASE = [ os.environ RDBASE ] ;

# make sure all executables end in .exe:
import type : change-generated-target-suffix ;
type.change-generated-target-suffix EXE : : exe ;


# Specify the path to the Boost project.
use-project boost 
  : $(BOOSTHOME) ;
use-project RDKit_Externals 
  : $(RDBASE)/External  ;


project RDKit
	: requirements <include>.  <threading>multi
          <include>$(BOOSTHOME)
          # <library>/boost/log//boost_log
          <include>$(RDBASE)/External/Lapack++/include
          <include>$(RDBASE)/External/vflib-2.0/include
          <toolset>gcc:<cflags>-Wno-unused-function
          <toolset>gcc:<cflags>-fno-strict-aliasing
          <toolset>msvc:<define>WIN32
	  <address-model>64:<cflags>-fPIC
          # <define>RDK_USELAPACKPP #<- uncomment this to use lapack++
          <toolset>msvc:<define>BOOST_NUMERIC_BINDINGS_USE_CLAPACK
          <toolset>msvc:<define>_CRT_SECURE_NO_DEPRECATE
        : default-build release ;


alias all-libraries : Catalogs DataManip/MetricMatrixCalc DataStructs DistGeom ForceField Geometry GraphMol Numerics Query RDBoost RDGeneral SimDivPickers ChemicalFeatures ;

alias all-wrappers : RDBoost/Wrap 
  DataStructs/Wrap
  Geometry/Wrap
  ML/Cluster/Murtagh ML/InfoTheory/Wrap ML/Data ML/FeatureSelect/Wrap
  DataManip/MetricMatrixCalc/Wrap
  SimDivPickers/Wrap
  ForceField/Wrap 
  DistGeom/Wrap
  Numerics/Alignment/Wrap 
  ChemicalFeatures/Wrap
  GraphMol//all-wrappers
 ;


alias nonmol-libraries : Catalogs DataManip/MetricMatrixCalc DataStructs DistGeom ForceField Geometry Numerics Query RDBoost RDGeneral SimDivPickers ChemicalFeatures ;

alias nonmol-wrappers : RDBoost/Wrap 
  DataStructs/Wrap
  Geometry/Wrap
  ML/Cluster/Murtagh ML/InfoTheory/Wrap ML/Data ML/FeatureSelect/Wrap
  DataManip/MetricMatrixCalc/Wrap
  SimDivPickers/Wrap
  ForceField/Wrap 
  DistGeom/Wrap
  Numerics/Alignment/Wrap 
  ChemicalFeatures/Wrap
 ;



lib lapack
  :
  : <name>lapack
  <toolset>msvc:<file>$(RDBASE)/External/Lapack/win32/LAPACK.lib
  :
  ;
lib blas
  :
  : <name>blas
  <toolset>msvc:<file>$(RDBASE)/External/Lapack/win32/LAPACK.lib
  :
  ;
# if you want to use Lapack++, use this version:
#alias lapacklibs : /RDKit_Externals//Lapack++ lapack blas ;
alias lapacklibs : lapack blas ;
alias vflib : /RDKit_Externals//vflib ;

